<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <title>RUNRUN | 코스 상세보기</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fugaz+One&family=Nunito+Sans:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <script
      src="//dapi.kakao.com/v2/maps/sdk.js?appkey=477a1cea9ecc7c2b3e69f3540a3986b4&libraries=services"
      th:src="@{//dapi.kakao.com/v2/maps/sdk.js?appkey=477a1cea9ecc7c2b3e69f3540a3986b4&libraries=services}"
    ></script>
    <link
      rel="stylesheet"
      href="/css/courseDetail.css"
      th:href="@{/css/courseDetail.css}"
    />
  </head>
  <body>
    <div class="page">
      <!-- Header -->
      <header class="course-header">
        <button
          class="back-button"
          type="button"
          aria-label="뒤로가기"
          onclick="history.back()"
        >
          <img
            src="http://localhost:3845/assets/5d8e7700a6d94e6f5d3b62853522a7c52a457010.svg"
            alt="뒤로가기 아이콘"
          />
        </button>
        <h1 class="page-title">코스 상세보기</h1>
      </header>

      <!-- Main Content -->
      <main class="course-content" id="courseContent">
        <!-- Course Image -->
        <div
          class="course-image-container"
          id="courseImageContainer"
          style="display: none"
        >
          <img id="courseImage" alt="코스 이미지" class="course-image" />
        </div>

        <!-- Course Map -->
        <div class="form-field">
          <label class="field-label">코스</label>
          <div class="map-container" id="map"></div>
        </div>

        <!-- Title Field -->
        <div class="form-field">
          <label class="field-label">제목</label>
          <input type="text" class="field-input" id="courseTitle" readonly />
        </div>

        <!-- Content Field -->
        <div class="form-field">
          <label class="field-label">내용</label>
          <textarea
            class="field-textarea"
            id="courseDescription"
            readonly
          ></textarea>
        </div>

        <!-- Distance Field -->
        <div class="form-field">
          <label class="field-label">거리</label>
          <input type="text" class="field-input" id="courseDistance" readonly />
        </div>

        <!-- Location Field -->
        <div class="form-field">
          <label class="field-label">위치</label>
          <input type="text" class="field-input" id="courseAddress" readonly />
        </div>

        <!-- Author Field -->
        <div class="form-field">
          <label class="field-label">작성자</label>
          <input type="text" class="field-input" id="courseAuthor" readonly />
        </div>

        <!-- Created Date Field -->
        <div class="form-field">
          <label class="field-label">작성일자</label>
          <input
            type="text"
            class="field-input"
            id="courseCreatedAt"
            readonly
          />
        </div>

        <!-- Like/Favorite Actions -->
        <div class="course-like-actions">
          <button
            class="action-icon heart-icon"
            type="button"
            id="likeBtn"
            aria-label="좋아요"
          >
            <img
              src="http://localhost:3845/assets/9af0c1d4ec1d966c7ec0b9ad1664f0fb4dc60971.svg"
              alt="좋아요 아이콘"
            />
            <span class="action-count" id="likeCount">0</span>
          </button>
          <button
            class="action-icon star-icon"
            type="button"
            id="favoriteBtn"
            aria-label="즐겨찾기"
          >
            <img
              src="http://localhost:3845/assets/a153ec3dff46ec34044b8bce0977bd3c5e0e43d7.svg"
              alt="즐겨찾기 아이콘"
            />
            <span class="action-count" id="favoriteCount">0</span>
          </button>
          <button
            class="action-icon siren-icon"
            type="button"
            id="sirenBtn"
            aria-label="신고하기"
          >
            <img src="/img/siren.svg" alt="신고하기 아이콘" />
            <span>신고하기</span>
          </button>
        </div>

        <!-- Siren Modal -->
        <div class="modal-overlay" id="sirenModal" style="display: none">
          <div class="modal-content">
            <div class="modal-header">
              <h2 class="modal-title">코스 신고하기</h2>
              <button
                class="modal-close"
                type="button"
                id="closeSirenModal"
                aria-label="닫기"
              >
                ×
              </button>
            </div>
            <div class="modal-body">
              <p class="modal-description">
                부적절한 내용이 있다면 신고해주세요. 신고 사유를 자세히
                입력해주시면 더 빠르게 처리할 수 있습니다.
              </p>
              <div class="form-field">
                <label class="field-label" for="sirenDescription"
                  >신고 사유</label
                >
                <textarea
                  class="field-textarea"
                  id="sirenDescription"
                  placeholder="신고 사유를 입력해주세요 (10자 이상 500자 이하)"
                  rows="5"
                ></textarea>
                <p
                  class="field-error"
                  id="sirenDescriptionError"
                  style="display: none"
                ></p>
              </div>
            </div>
            <div class="modal-footer">
              <button
                class="modal-button cancel-button"
                type="button"
                id="cancelSirenBtn"
              >
                취소
              </button>
              <button
                class="modal-button submit-button"
                type="button"
                id="submitSirenBtn"
              >
                신고하기
              </button>
            </div>
          </div>
        </div>

        <!-- Course Images -->
        <div class="form-field" id="courseImageField" style="display: none">
          <label class="field-label">이미지</label>
          <div class="image-preview">
            <img
              id="courseImagePreview"
              alt="코스 이미지"
              class="preview-image"
            />
          </div>
        </div>

        <!-- Action Buttons (Edit/Delete) -->
        <div class="course-actions" id="courseActions" style="display: none">
          <button class="edit-button" type="button" id="editBtn">
            수정하기
          </button>
          <button class="delete-button" type="button" id="deleteBtn">
            삭제하기
          </button>
        </div>
      </main>

      <!-- Bottom Navigation -->
      <div th:replace="~{common/bottom-nav :: bottomNav}"></div>
    </div>

    <!-- Course ID for JavaScript -->
    <script th:inline="javascript">
      /*<![CDATA[*/
      const courseId = /*[[${courseId}]]*/ null;
      /*]]>*/
    </script>

    <script src="/js/courseDetail.js" th:src="@{/js/courseDetail.js}"></script>
  </body>
</html>
